name: "multiperl test"
on:
  workflow_call: ~

jobs:
  build-tarball:
    name: "Build dist archive"
    runs-on: ubuntu-latest
    outputs:
      perl-versions: ${{ steps.build-archive.outputs.perl-versions }}
    steps:
    - name: Build archive
      id: build-archive
      uses: rjbs/dzil-actions/build@v0

  multiperl-test:
    name: "Run dist tests"
    needs: build-tarball
    uses: rjbs/dzil-actions/.github/workflows/multiperl-test-matrix.yaml@v0
    with:
      perl-versions-json: ${{ needs.build-tarball.outputs.perl-versions }}

